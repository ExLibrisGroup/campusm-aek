var utils = require("./utils"),
    details = {},
    storageKey = "_omb_aek_personal_details";

try {
  details = JSON.parse(sessionStorage[storageKey]);
}
catch(e) {}

function store() {
  try{
    sessionStorage[storageKey] = JSON.stringify(details);
  }
  catch(e) {}
}

module.exports = {
  get:function(property) {
    if(property) {
      return utils.cloneDeep(details[name])
    }
    else {
      return utils.cloneDeep(details)
    }
  },
  set:function(obj,value) {
    if(utils.isString(obj)) {
      details[obj] = value
    }
    else{
      details = utils.merge(details,obj)
    }
    store()
  },
  plate:function(template) {
    return utils.plate(template,utils.cloneDeep(details))
  }
}