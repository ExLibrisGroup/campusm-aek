
module.exports = function(taskName,gulp,cb) {

  if(!cb && _.isFunction(gulp)) {
    gulp = null;
    cb = gulp;
  }

  if(!gulp) {
    gulp = require("gulp");
  }

  var onStop = function(ev) {
    if(ev.task === taskName) {
      gulp.removeListener("task_stop",onStop);
      cb();
    }
  };
  gulp.on("task_stop",onStop);
  gulp.start(taskName);
};
