module.exports = (taskName,cb)->
  gulp = require("./gulp")
  if not gulp
    cb(Error("NOGULP"))
    return false
  else
    if !gulp.tasks[taskName]
      cb(Error("NOGULPTASK"))
      return false
    else
      onStop = (ev)->
        if ev.task==taskName
          gulp.removeListener("task_stop",onStop)
          cb(null,ev)

      gulp.on("task_stop",onStop)

      gulp.start(taskName)

      return true