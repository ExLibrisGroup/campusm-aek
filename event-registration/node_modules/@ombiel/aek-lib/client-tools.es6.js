var cmUrl = require("./client-tools/campusm-url-scheme"),
    utils = require("./utils");

module.exports = {
  invoke:function(name,parameters) {
    if(this.mock && this.mock[name]) {
      this.mock[name](parameters);
    }
    else if(utils.isWeb()) {
      
      var clientTools;
      try{
        clientTools = window.parent.CampusM.page.clientTools;
      }
      catch(e) {}
      
      if(clientTools) {
        clientTools(name,parameters);
      }
      else {
        console.error("Cannot find clientTools. Are you trying to execute this out of the web app context?")
      }
    }
    else {
      cmUrl.invoke(name,parameters)
    }
  }
}