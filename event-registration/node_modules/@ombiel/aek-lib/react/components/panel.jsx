var React = require("react");
var mergeProps = require("../utils/merge-props");
var _ = require("../../utils");
var pickHtmlProps = require("../utils/pick-html-props");


// use of panels requires this additional attribute on the body
// with this attribute, the panels will implement native scrolling (webkitOverflowScrolling="touch")
// this attribute is modified in horizontal slide animation to temporarily switch off webkitOverflowScroll
// as it causes flickering
document.addEventListener("DOMContentLoaded", function() {
  document.body.setAttribute("data-aek-is-animating","false");
});

var Panel = React.createClass({

  getDefaultProps:function() {
    return {
      component:"div"
    };
  },

  render:function() {
    var props = {
      classSet:{
        panel:true,
        loading:this.props.loading
      },
      style:{}
    };

    var children = this.props.children;

    if(this.props.padded) {
      props.classSet.padding = true;
      children = <div style={{height:"100%",position:"relative"}}>{children}</div>;
    }

    _.each(["top","left","width","height"],function(key) {
      if(_.isNumber(this.props[key])) {
        props.style[key] = this.props[key] + "px";
      }
    }.bind(this));

    props = pickHtmlProps(mergeProps(props,this.props,{children}));

    return React.createElement(_.isString(this.props.component) && this.props.component || "div",props);
  }
});

module.exports = Panel;
