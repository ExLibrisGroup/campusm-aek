var _ = require("../../utils");

module.exports = function(propName = "$$$windowSize") {

  return function(store) {

    var ctx = store.context({"group":"WINDOWSIZE",path:propName});

    store.on("init",function() {
      var dimensions = _.getWindowDimensions();
      ctx.dispatch({
        name:"init",
        payload:dimensions,
        replace:dimensions
      });

      window.addEventListener("resize",_.debounce(function() {
        var dimensions = _.getWindowDimensions();
        ctx.dispatch({
          name:"update",
          payload:dimensions,
          replace:dimensions
        });
      },10));
    });
  };
};
