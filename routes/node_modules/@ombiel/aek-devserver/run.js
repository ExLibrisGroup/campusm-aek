#!/usr/bin/env node
const log = require("@ombiel/aek-cli-support/logger");
const fs = require("fs");
const path = require("path");
const CLI = require("@ombiel/aek-cli-support/cli");

const {start: startNiceErrors, printNiceError} = require("@ombiel/aek-cli-support/nice-error");

startNiceErrors();

const commands = [
  require("./commands/start"),
  require("./commands/build"),
  require("./commands/prerelease"),
  require("./commands/gen-screen"), //hidden
];

const cli = new CLI(commands,{
  log: log,
  scriptName: "aekdevserver",
  getVersion: ()=>({
    "aek-devserver": JSON.parse(fs.readFileSync(path.resolve(__dirname,"./package.json"))).version
  }),
});


cli.ready.then(function() {
  cli.parse();
})
.catch(function(e) {
  printNiceError(e);
});
