## Notifier

Notifier provides a notification system to communicate small messages with the user within an AEK screen.

Notifier works outside of the main flow of your application so you can use it as an independent messaging system.

### Basic Usage

``` javascript

import {Notifier} from "@ombiel/aek-lib";

Notifier.add({
  title:"My Message Title",
  message:"My message content"
});

```
------------------

## Methods

### `Notifier.add(options)`

Add a notification with specified options (see below)

Returns a notification object which can be used to programmatically remove it later.

### `Notifier.remove(notification)`

Remove a notification programmatically.

### `Notifier.clear()`

Removes ALL notifications programatically.


-------------------------

## Creating a notification

Notification are defined with the following options:

| Name              | Type           | Default | Description                                                                                         |
|:------------------|:---------------|:--------|:----------------------------------------------------------------------------------------------------|
| **`title`**       | `string`       | `null`  | Title of the notification                                                                           |
| **`message`**     | `string`       | `null`  | Message of the notification                                                                         |
| **`level`**       | `string`       | `info`  | Level of the notification. Available: **success**, **error**, **warning** and **info**              |
| **`autoDismiss`** | `integer`      | `5`     | Delay in seconds for the notification go away. Set this to `0` to not auto-dismiss the notification |
| **`dismissible`** | `boolean`      | `true`  | Set if notification is dismissible by the user _see below_                                          |
| **`action`**      | `object`       | `null`  | Add a button with label and callback function (callback is optional) _see below_                    |
| **`children`**    | `ReactElement` | `null`  | Adds custom content, and overrides `action` (if defined) _see below_                                |


### Dismissible

If set to false, the notification will not display the dismiss ('x') button and will only be dismissible programmatically or after autoDismiss timeout.

### Action

Add a button and a callback function to the notification. If this button is clicked, the callback function is called (if provided) and the notification is dismissed.

```javascript
notification = {
  [...],
  action: {
    label: 'Button name',
    callback: function() {
      console.log('Notification button clicked!');
    }
  }
}

```

### Children

Add custom content / react elements

```javascript
notification = {
  [...],
  children: (
    <div>
      <h2>Hello World</h2>
      <a>Anchor</a>
    </div>
  )
}

```

### Removing Notifications

Removing individual notifications:

```javascript

let myNotification = Notifier.add({...});

Notifier.remove(myNotification);

```

Removing all notifications:

```javascript

Notifier.clear();

```

--------

### Demo


<script type="text/aek-example" data-component="Example">

  import {Notifier,Form,Divider,Table,Button} from "@ombiel/aek-lib";
  import {pick} from "lodash";

  const fields = [
    {name:"title"},
    {name:"message"},
    {name:"level",type:"select",options:["info","warning","error","success"]},
    {name:"autoDismiss",type:"number"},
    {name:"dismissible",type:"checkbox"},
    {name:"actionText",label:"Action Text"},
    {name:"customContent",label:"Custom Content",type:"checkbox"},
    [<Divider/>,<Button type="submit" variation="positive">Add</Button>,<Button variation="negative" onClick={(ev)=>{ev.preventDefault();Notifier.clear();}}>Clear All</Button>]
  ];

  class Example extends React.Component{
    constructor(){
      super();
      this.state = {
        title:"Message Title",
        message:"Message Content",
        level:"info",
        dismissible:true
      }
    }

    onSubmit = (ev)=> {
      ev.preventDefault();
      let opts = pick(this.state,"title","message","level","autoDismiss","dismissible");
      let {actionText,customContent} = this.state;
      if(actionText) {
        opts.action = {
          label:actionText,
          callback:()=>{
            alert(`You clicked the "${actionText}" button`);
          }
        }
      }

      if(customContent) {
        opts.children = (
          <div>
            <Table compact celled data={[[1,2,3],[4,5,6]]} />
          </div>
        );
      }

      Notifier.add(opts);
    }

    onChange = (ev,name,value)=> {
      this.setState({[name]:value});
      if (name=="customContent" && value) {
        this.setState({message:""});
      }
    }

    render() {

      return <Form onSubmit={this.onSubmit} onChange={this.onChange} fields={fields} data={this.state}/>;

    }
  };

</script>
