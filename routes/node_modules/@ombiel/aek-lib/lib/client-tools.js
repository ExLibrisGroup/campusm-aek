import {isWeb} from "./utils";

import cmUrl from "./client-tools/campusm-url-scheme";

export default {
  invoke: function(name,parameters) {
    if (this.mock && this.mock[name]) {
      this.mock[name](parameters);
    }
    else if (isWeb()) {

      let clientTools;
      try {
        ({clientTools} = window.parent.CampusM.page);
      }
      catch (e) {} //eslint-disable-line no-empty

      if (clientTools) {
        clientTools(name,parameters);
      }
      else {
        console.error("Cannot find clientTools. Are you trying to execute this out of the web app context?"); //eslint-disable-line no-console
      }
    }
    else {
      cmUrl.invoke(name,parameters);
    }
  }
};
