import {throttle} from "lodash";
import {getPlatform} from "../../index";

if (getPlatform() === "android") {
  var check = function() {
    if (document.body.scrollTop < 1) {
      // check that all divs are at the top
      var els = document.body.querySelectorAll("*");
      Array.prototype.some.call(els,function(el) {
        if (el.scrollTop) {
          document.body.scrollTop = 1;
          return true;
        }
        return false;
      });
    }
  };

  var throttledCheck = throttle(check,100);

  document.body.style.boxSizing = "content-box";
  document.body.style.borderTop = "1px solid transparent";
  document.body.scrollTop = 1;
  window.addEventListener("scroll",throttledCheck);
  document.body.addEventListener("touchstart", throttledCheck);
}
