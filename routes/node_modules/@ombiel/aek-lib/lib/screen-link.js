import {md5} from "@ombiel/cm-lib";
import {getPackageData,param} from "./utils";

export default function(screenPath,params) {
  var split = screenPath.split("/");
  if (split[0] === ".") {
    var packageData = getPackageData();
    if (packageData && packageData.name) {
      split[0] = packageData.name;
    }
    else {
      return `/aek/c/${split.slice(1).join("/")}`;
    }
    screenPath = split.join("/");
  }
  var url = `/aek/c/aek${md5(screenPath).substring(0,17)}`;
  if (params) {
    var qs = param(params);
    url += `?${qs}`;
  }
  return url;

}
