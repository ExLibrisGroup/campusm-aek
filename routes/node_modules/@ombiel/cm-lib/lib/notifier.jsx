import {extend} from "lodash";

import NotificationSystem from "react-notification-system";
import React from "react";
import ReactDOM from "react-dom";

var defaultNotification = {
  title: null,
  message: null,
  level: "info",
  position: 'bc',
  autoDismiss: 5,
  dismissible: true,
  action: null
};


var notifications;

function init() {
  var el = document.createElement("div");
  el.style.position = "absolute";
  document.body.appendChild(el);
  notifications = ReactDOM.render(<NotificationSystem />,el);
}

if (document.body) { init(); }
else {
  document.addEventListener('DOMContentLoaded',init);
}

const Notifier = {
  add(notification) {
    return notifications.addNotification(extend({},defaultNotification,notification));
  },
  remove(notification) {
    return notifications.removeNotification(notification);
  },
  clear() {
    return notifications.clearNotifications();
  }
};

export default Notifier;
