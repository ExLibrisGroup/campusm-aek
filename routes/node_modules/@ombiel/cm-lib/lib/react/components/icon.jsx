import "./base.aekcss";
import "./icon.aekcss";


import React from "react";
import PropTypes from "prop-types";

import {forEach,clone,camelCase,capitalize,isString,isFunction} from "lodash";

const iconRegistry = {};

function normName(name) {
  return capitalize(camelCase(name.replace(/^Icon/,"")));
}

export function registerIcons(icons) {
  forEach(icons,(icon,name)=>{
    iconRegistry[normName(name)] = icon;
  });
}

export function getIconByName(name) {
  return iconRegistry[normName(name)];
}

export function getRegisteredIcons() {
  return clone(iconRegistry);
}

export function createIcon(icon,props = {}) {
  let iconElement = icon;
  if (isFunction(icon) || isString(icon)) {
    iconElement = <Icon icon={icon} {...props} />;
  }
  return iconElement;
}

export function Icon(props) {
  var {icon,...otherProps} = props;
  if (isString(icon)) {
    icon = getIconByName(icon);
  }
  if (!isFunction(icon)) { return null; }

  return React.createElement(icon,otherProps);

}

Icon.propTypes = {
  icon: PropTypes.oneOfType([PropTypes.string,PropTypes.func]),
};

export {default as IconBase} from 'react-icon-base';
