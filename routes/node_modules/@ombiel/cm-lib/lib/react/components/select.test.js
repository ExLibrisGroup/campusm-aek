import React from 'react';
import {mount} from "enzyme";
import Select from "./select";

describe("Select no props",()=>{
  const wrapper = mount(
    <Select></Select>
  );

  it("should match snapshot",()=>{
    expect(wrapper).toMatchSnapshot();
  });

  it("should be a select",()=>{
    const selectInputComponent = wrapper.find("select");
    expect(selectInputComponent).toHaveLength(1);
  });
});

describe("Select with options",()=>{
  const wrapper = mount(
    <Select options={["option1","option2","option3"]} />
  );

  it("should match snapshot",()=>{
    expect(wrapper).toMatchSnapshot();
  });

  it("should be a select",()=>{
    const selectInputComponent = wrapper.find("select");
    expect(selectInputComponent).toHaveLength(1);
  });

  it("should have three options",()=>{
    const options = wrapper.find("option");
    expect(options).toHaveLength(3);
  });

});

describe("Select with options and placeholder",()=>{
  const wrapper = mount(
    <Select placeholder="-- Please Select --" options={["option1","option2","option3"]} />
  );

  it("should match snapshot",()=>{
    expect(wrapper).toMatchSnapshot();
  });

  it("should be a select",()=>{
    const selectInputComponent = wrapper.find("select");
    expect(selectInputComponent).toHaveLength(1);
  });

  it("should have four options",()=>{
    const options = wrapper.find("option");
    expect(options).toHaveLength(4);
  });

  it("should have the first option with the text and value of -- Please Select --",()=>{
    const selectInputComponent = wrapper.find("option").first();
    expect(selectInputComponent.prop('value')).toEqual("-- Please Select --");
    expect(selectInputComponent.text()).toEqual('-- Please Select --');
  });
});

describe("Select with optsGroup",()=>{
  const wrapper = mount(
    <Select options={[{optgroup: "Test Group",options: ["Hello","World"]},{optgroup: "Test Group2",options: ["Hello2","World2"]}]} />
  );

  it("should match snapshot",()=>{
    expect(wrapper).toMatchSnapshot();
  });

  it("should be a select",()=>{
    const selectInputComponent = wrapper.find("select");
    expect(selectInputComponent).toHaveLength(1);
  });

  it("should have two optgroup",()=>{
    const options = wrapper.find("optgroup");
    expect(options).toHaveLength(2);
  });

  it("should have the first optgroup with the value of hello and world for options",()=>{
    const firstGroup = wrapper.find("optgroup").first();
    const firstOption = firstGroup.find("option").first();
    const secondOption = firstGroup.find("option").at(1);
    expect(firstGroup.prop('label')).toEqual("Test Group");
    expect(firstOption.text()).toEqual("Hello");
    expect(firstOption.prop('value')).toEqual("Hello");
    expect(secondOption.text()).toEqual("World");
    expect(secondOption.prop('value')).toEqual("World");
  });
});
