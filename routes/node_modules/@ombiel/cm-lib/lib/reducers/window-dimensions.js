import {debounce} from "lodash";
import {getWindowDimensions} from "../utils";

var initDimensions = getWindowDimensions();

module.exports = function() {

  var fn = function(state = initDimensions,action) {

    switch (action.type) {
      case "UPDATE_WINDOW_DIMENSIONS":
        state = getWindowDimensions();
        break;

      default:
        // do nothing
    }
    return state;
  };

  fn.setStore = function(store) {
    // monitor windowDimensions
    window.addEventListener("resize",debounce(function() {
      store.dispatch({type: "UPDATE_WINDOW_DIMENSIONS"});
    },10));
  };

  return fn;
};
